pkgname=ollama-web
pkgver=0
pkgrel=1
pkgdesc="Web UI for Ollama"
arch=('any')
url="https://github.com/eldablo23307/ollama_web"
license=('MIT')

depends=(
  'python'
  'python-ollama'
  'python-flask'
)

makedepends=(
  'git'
  'python-build'
  'python-installer'
)

source=("git+$url.git")
sha256sums=('SKIP')

pkgver() {
  cd "$srcdir/ollama_web"
  printf "r%s.%s" \
    "$(git rev-list --count HEAD)" \
    "$(git rev-parse --short HEAD)"
}

build() {
  cd "$srcdir/ollama_web"
  python -m build --wheel --no-isolation
}

package() {
  cd "$srcdir/ollama_web"
  python -m installer --destdir="$pkgdir" dist/*.whl
}
